<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <data>
    <template id="report_payment_ticket_80">
      <t t-call="web.html_container">
        <t t-foreach="docs" t-as="o">
          <t t-call="web.basic_layout">
            <div class="page">
              <style>
		body{
		font-family: "Courier";
		}
                .invoice-ticket {
                text-align: left;
                width: 340px;
		margin: 0;
		padding-left: 0;
		padding-right: 0;
                background-color: white;
                font-size: 13px;
                padding-bottom:30px;
                display: inline-block;
                overflow: hidden;
                }
                .invoice-center-align {
                text-align: center;
                }
                .invoice-center-align .info {
                padding-top: 10px;
                }
                .client-info {
                padding-bottom: 5px;
                }
                .invoice-lines {
                width: 300px;
                }
                .total-info {
                font-size: 16px;
                font-weight: bold;
                }
                td
                {
                padding:0 15px;
                }
              </style>
              <div class="invoice-ticket">
                <div class="invoice-center-align">
                  <img t-if="o.company_id.logo" t-att-src="image_data_uri(o.company_id.logo)" alt="Logo" width="150px"/>
                  <div class="info">
                    <t t-esc='o.company_id.name'/>
                    <t t-if='o.company_id.phone'>
                      <div>Tel:
                      <t t-esc='o.company_id.phone'/>
                      </div>
                    </t>
                    <t t-if='o.company_id.vat'>
                      <div>RUC:
                      <t t-esc='o.company_id.vat'/>
                      </div>
                    </t>
                    <span class="company_address" t-field="o.company_id.partner_id" t-options='{"widget": "contact", "fields": ["address"], "no_marker": true}'/>
                    <t t-if='o.user_id'>
                      <div class='cashier'>
                        <div>--------------------------------</div>
                        <div>Atentido por
                        <t t-esc='o.user_id.name'/>
                        </div>
                      </div>
                    </t>
                  <div class="invoice-center-align">
                    <span t-field="o.payment_date"/>
                  </div>
                  </div>
                  <br/>
                </div>
                <div class="receipt-phone client-info">
                  <t t-if="o.name">
		    Recibo de Caja
                    <t t-esc="o.name"/>
                    <br/>
                    <t t-if="o.partner_id">
                      <t t-if="o.partner_id.catalog_06_id.code == 6">
                        Razón Social:
                      </t>
                      <t t-else="">
                        Nombre:
                      </t>
                      <t t-esc="o.partner_id.name"/>
                      <br/>
		      <t t-if="o.partner_id.vat">
			<t t-esc="o.partner_id.catalog_06_id.name"/>:
			<t t-esc="o.partner_id.vat"/>
		      </t>
		      <div name="extra-customer-info">
		      </div>
                    </t>
                  </t>
		  <t t-if="o.communication">
		    Concepto: <span t-esc="o.communication"/>
		  </t>
          <br/>
		  <t t-if="o.communication">
		    Diario de Pago: <span t-esc="o.journal_id.name"/>
		  </t>
		  
                </div>

                <table class='invoice-lines'>
                  <tr class="total-info" name="totals">
                    <td>Monto Pagado:</td>
                    <td class="text-right">
                      <span t-field="o.amount"/>
                    </td>
                  </tr>
                </table>
              </div>
            </div>
          </t>
        </t>
      </t>
    </template>
    
    <template id="report_invoice_ticket_80">
      <t t-call="web.html_container">
        <t t-foreach="docs" t-as="o">
          <t t-call="web.basic_layout">
            <div class="page">
              <style>
                body{
                font-family: "Courier";
                }
                            .invoice-ticket {
                            text-align: left;
                            width: 340px;
                margin: 0;
                padding-left: 0;
                padding-right: 0;
                background-color: white;
                font-size: 13px;
                padding-bottom:30px;
                display: inline-block;
                overflow: hidden;
                }
                .invoice-center-align {
                text-align: center;
                }
                .invoice-center-align .info {
                padding-top: 10px;
                }
                .client-info {
                padding-bottom: 5px;
                }
                .invoice-lines {
                width: 300px;
                }
                .total-info {
                font-size: 16px;
                font-weight: bold;
                }
                td
                {
                padding:0 15px;
                }
              </style>
              <div class="invoice-ticket">
                <div class="invoice-center-align">
                  <img t-if="o.company_id.logo" t-att-src="image_data_uri(o.company_id.logo)" alt="Logo" width="150px"/>
                  <div class="info">
                    <t t-esc="o.company_id.name"/>
                    <t t-if="o.company_id.phone">
                      <div>Tel:
                      <t t-esc="o.company_id.phone"/>
                      </div>
                    </t>
                    <t t-if="o.company_id.vat">
                      <div>RUC:
                      <t t-esc="o.company_id.vat"/>
                      </div>
                    </t>
                    <!-- <span class="company_address" t-field="o.company_id.partner_id" t-options="{&quot;widget&quot;: &quot;contact&quot;, &quot;fields&quot;: [&quot;address&quot;], &quot;no_marker&quot;: true}"/> -->
                    
                    <t t-esc="o.company_id.partner_id.street"/><br/>
                    <t t-esc="o.company_id.partner_id.country_id"/> 
                    <t t-if="company.partner_id.state_id" - t-esc="company.partner_id.state_id.name"/>
                    <t t-if="company.partner_id.city_id" - t-esc="company.partner_id.city_id.name"/>
                    <t t-if="company.partner_id.l10n_pe_district" - t-esc="company.partner_id.l10n_pe_district.name"/>

                    <!-- <t t-if="o.user_id">
                      <div class="cashier">
                        <div>-</div>
                        <div>Atentido por
                        <t t-esc="o.user_id.name"/>
                        </div>
                      </div>
                    </t> -->
                  </div>
                  <br/>
                </div>
                <div class="receipt-phone client-info">
                  <t t-if="o.name">
                    <!-- t t-if="o.refund_invoice_id">
                        <t t-if="o.refund_type == 'credit'">Nota de Crédito</t>
                        <t t-if="o.refund_type == 'debit'">Nota de Débito</t>
                    </t>
                    <t t-else="">
                              <t t-if="o.document_type == 'factura'">
                      Factura Electrónica</t>
                              <t t-if="o.document_type == 'boleta'">
                      Boleta Electrónica</t>
                    </t -->
                    <div class="invoice-center-align">
                    <span class="font-weight-bold text-uppercase" t-esc="o.l10n_latam_document_type_id and o.l10n_latam_document_type_id.report_name or ''"/>
                    <br/>
                    <span class="font-weight-bold text-uppercase" t-esc="o.name"/>
                    </div>
                    <!-- t t-if="o.refund_invoice_id">
                        <t t-if="o.refund_type == 'credit'"><strong>Tipo de Nota de Credito: </strong><t t-esc="o.credit_note_type.name"/></t>
                        <t t-if="o.refund_type == 'debit'"><strong>Tipo de Nota de Débito: </strong><t t-esc="o.debit_note_type.name"/></t>
                    </t -->
                    <br/>
                    <t t-if="o.partner_id">
                      <!-- t t-if="o.partner_id.catalog_06_id.code == 6">
                        Razón Social:
                      </t>
                      <t t-else="">
                        Nombre:
                      </t -->
                      <span class="text-nowrap" t-esc="o.partner_id.commercial_partner_id.l10n_latam_identification_type_id and o.partner_id.commercial_partner_id.l10n_latam_identification_type_id.name or 'DOCUMENTO'"/>:
                      <t t-esc="o.partner_id.name"/>
                      <br/>
                      <!--<t t-esc="o.partner_id.catalog_06_id.name"/>:-->
                      <t t-esc="o.partner_id.vat"/>
                      <div name="extra-customer-info">
                      </div>
                      <br/>
                    </t>
                  </t>
                </div>

                <table class="invoice-lines">
                  <thead>
                    <tr>
                      <td>CANT</td>
                      <td>PRODUCTO</td>
                      <td>VALOR</td>
                    </tr>
                  </thead>

                  <tbody>
                    <t t-foreach="o.invoice_line_ids" t-as="line">
                      <tr>
                        <td>
                          <span t-field="line.quantity"/>
                        </td>
                        <td t-attf-class="text-left">
                          <span t-field="line.name"/>
                        </td>
                        <td class="text-right">
                          <span t-field="line.price_total"/>
                        </td>
                      </tr>
                    </t>
                  </tbody>
                </table>
                <br/>
                <!-- table class="invoice-lines">
                  <tr>
                    <td>Subtotal:</td>
                    <td class="text-right">
                      <span t-field="o.amount_untaxed"/>
                    </td>
                  </tr>
                  <t t-foreach="o.tax_line_ids" t-as="taxdetail">
                    <tr>
                      <td>
                        <span t-field="taxdetail.name"/>
                      </td>
                      <td class="text-right">
                        <span t-field="taxdetail.amount_total"/>
                      </td>
                    </tr>
                  </t>
                  <tr t-if="o.op_gravadas_total">
                    <td>
                      Total Valor de Venta - Op. Gravadas
                    </td>
                    <td class="text-right">
                      <span t-field="o.op_gravadas_total"/>
                    </td>
                  </tr>
                  <tr t-if="o.op_exoneradas_total">
                    <td>
                      Total Valor de Venta - Op. Exoneradas
                    </td>
                    <td class="text-right">
                      <span t-field="o.op_exoneradas_total"/>
                    </td>
                  </tr>
                  <tr t-if="o.op_inafectas_total">
                    <td>
                      Total Valor de Venta - Op. Inafectas
                    </td>
                    <td class="text-right">
                      <span t-field="o.op_inafectas_total"/>
                    </td>
                  </tr>
                  <tr t-if="o.op_gratuitas_total">
                    <td>
                      Total Valor de Venta - Op. Gratuitas
                    </td>
                    <td class="text-right">
                      <span t-field="o.op_gratuitas_total"/>
                    </td>
                  </tr>
                  <tr t-if="o.op_exportacion_total">
                    <td>
                      Total Valor de Venta - Exportación
                    </td>
                    <td class="text-right">
                      <span t-field="o.op_exportacion_total"/>
                    </td>
                  </tr>
                  <tr class="total-info" name="totals">
                    <td>Total:</td>
                    <td class="text-right">
                      <span t-field="o.amount_total"/>
                    </td>
                  </tr>
                </table -->
                
                <table class="table table-sm" style="page-break-inside: avoid;">
                    <tr class="o_subtotal" style="" t-if="o.l10n_pe_edi_amount_base">
                        <td>
                            <span><strong>MONTO BASE </strong></span>
                        </td>
                        <td class="text-right o_price_total">
                            <span class="text-nowrap" t-field="o.l10n_pe_edi_amount_base"/>
                        </td>
                    </tr>
                    <tr class="border-black o_subtotal" style="" t-if="o.l10n_pe_edi_amount_discount">
                        <td>
                            <span><strong>DESCUENTO (-)</strong></span>
                        </td>
                        <td class="text-right o_price_total">
                            <span class="text-nowrap" t-field="o.l10n_pe_edi_amount_discount"/>
                        </td>
                    </tr>
                    <tr class="o_subtotal" style="" t-if="o.l10n_pe_edi_global_discount">
                        <td>
                            <span><strong>G. DISCOUNT (-)</strong></span>
                        </td>
                        <td class="text-right o_price_total">
                            <span class="text-nowrap" t-field="o.l10n_pe_edi_global_discount"/>
                        </td>
                    </tr>
                    <tr class="o_subtotal" style="" t-if="o.l10n_pe_edi_amount_exonerated">
                        <td>
                            <span><strong>EXONERADO</strong></span>
                        </td>
                        <td class="text-right o_price_total">
                            <span class="text-nowrap" t-field="o.l10n_pe_edi_amount_exonerated"/>
                        </td>
                    </tr>
                    <tr class="o_subtotal" style="" t-if="o.l10n_pe_edi_amount_unaffected">
                        <td>
                            <span><strong>INAFECTO</strong></span>
                        </td>
                        <td class="text-right o_price_total">
                            <span class="text-nowrap" t-field="o.l10n_pe_edi_amount_unaffected"/>
                        </td>
                    </tr>
                    <tr class="o_subtotal" style="" t-if="o.l10n_pe_edi_amount_free">
                        <td>
                            <span><strong>AMOUNT FREE</strong></span>
                        </td>
                        <td class="text-right o_price_total">
                            <span class="text-nowrap" t-field="o.l10n_pe_edi_amount_free"/>
                        </td>
                    </tr>
                    <t t-foreach="o.amount_by_group" t-as="amount_by_group">
                        <tr class="o_subtotal" style="">
                            <t t-if="len(o.line_ids.filtered(lambda line: line.tax_line_id)) in [0, 1] and o.amount_untaxed == amount_by_group[2]">
                                <td><span class="text-nowrap" t-esc="amount_by_group[0]"/></td>
                                <td class="text-right o_price_total">
                                    <span class="text-nowrap" t-esc="amount_by_group[3]"/>
                                </td>
                            </t>
                            <t t-else="">
                                <td>
                                    <span t-esc="amount_by_group[0]"/>
                                    <span class="text-nowrap"> on
                                        <t t-esc="amount_by_group[4]"/>
                                    </span>
                                </td>
                                <td class="text-right o_price_total">
                                    <span class="text-nowrap" t-esc="amount_by_group[3]"/>
                                </td>
                            </t>
                        </tr>
                    </t>
                    <tr class="border-black o_total">
                        <td><strong>TOTAL</strong></td>
                        <td class="text-right">
                            <span class="text-nowrap" t-field="o.amount_total"/>
                        </td>
                    </tr>
                </table>
                
                <br/>
                <div class="invoice-info" name="invoice-info">
                  <p>SON: <t t-esc="o.l10n_pe_edi_amount_in_words"/></p>
                  <!-- t t-if="o.digest">
                    <span t-field="o.digest"/>
                  </t -->
                  <div class="invoice-center-align">
                    <!-- p t-if="o.show_barcode()">
                      <span t-if="o.barcode">
                        <img width="65%" t-attf-src="'data:image/*;base64, {{o.barcode}}'"/>
                      </span>
                    </p>
                    <p t-if="o.show_qr()">
                      <span t-if="o.qr">
                        <img width="40%" t-attf-src="data:image/*;base64, {{o.qr}}"/>
                      </span>
                    </p -->
                    
                    <div t-attf-class="#{'col-12' if report_type != 'html' else 'col-12 col-sm-12'} col-auto mb-12">
                            <img t-att-src="'/report/barcode/QR/%s|%s|%s|%s|%s|%s|%s|%s|%s|'%(o.company_id.vat,o.l10n_latam_document_type_id.code,o.l10n_pe_edi_serie,o.l10n_pe_edi_number,o.l10n_pe_edi_amount_igv,o.amount_total,o.invoice_date,o.partner_id.l10n_latam_identification_type_id.l10n_pe_vat_code,o.partner_id.vat)" class="img-fluid img-thumbnail rounded mx-auto d-block" style="width:100px;height:100px;"/>
                    </div>
                  </div>
                  <t>
                    <p t-if="o.l10n_latam_document_type_id.code == '07'">Representación impresa de la nota de crédito electrónica: <span class="font-weight-bold">https://ww1.sunat.gob.pe/ol-ti-itconsultaunificadalibre/consultaUnificadaLibre/consulta</span></p>
                    <p t-if="o.l10n_latam_document_type_id.code == '08'">Representación impresa de la nota de débito electrónica: <span class="font-weight-bold">https://ww1.sunat.gob.pe/ol-ti-itconsultaunificadalibre/consultaUnificadaLibre/consulta</span></p>
                  </t>
                  <t>
                    <p t-if="o.l10n_latam_document_type_id.code == '01'">Representación impresa de la factura electrónica: <span class="font-weight-bold">https://ww1.sunat.gob.pe/ol-ti-itconsultaunificadalibre/consultaUnificadaLibre/consulta</span></p>
                    <p t-if="o.l10n_latam_document_type_id.code == '03'">Representación impresa de la boleta de venta electrónica: <span class="font-weight-bold">https://ww1.sunat.gob.pe/ol-ti-itconsultaunificadalibre/consultaUnificadaLibre/consulta</span></p>
                  </t>
                  <div class="invoice-center-align">
                    <span t-field="o.invoice_date"/>
                  </div>
                </div>
              </div>
            </div>
          </t>
        </t>
      </t>
    </template>

    <template id="report_invoice_ticket_50">
      <t t-call="web.html_container">
        <t t-foreach="docs" t-as="o">
          <t t-call="web.basic_layout">
            <div class="page">
              <style>
		body{
		font-family: "Courier";
		}
                .invoice-ticket {
                text-align: left;
                width: 280px;
                background-color: white;
                padding-top: 15px;
                padding-bottom: 15px;
                padding-left: 0;
                padding-right: 0;
                font-size: 13px;
                padding-bottom:30px;
                display: inline-block;
                overflow: hidden;
                }
                .invoice-center-align {
                text-align: center;
                }
                .invoice-center-align .info {
                padding-top: 10px;
                }
                .client-info {
                padding-bottom: 5px;
                }
                .invoice-lines {
                width: 280px;
                }
                .total-info {
                font-size: 16px;
                font-weight: bold;
                }
                td
                {
                padding:0 15px;
                }
              </style>
              <div class="invoice-ticket">
                <div class="invoice-center-align">
                  <img t-if="o.company_id.logo" t-att-src="image_data_uri(o.company_id.logo)" alt="Logo" width="150px"/>
                  <div class="info">
                    <t t-esc='o.company_id.name'/>
                    <t t-if='o.company_id.phone'>
                      <div>Tel:
                      <t t-esc='o.company_id.phone'/>
                      </div>
                    </t>
                    <t t-if='o.company_id.vat'>
                      <div>RUC:
                      <t t-esc='o.company_id.vat'/>
                      </div>
                    </t>
                    <span class="company_address" t-field="o.company_id.partner_id" t-options='{"widget": "contact", "fields": ["address"], "no_marker": true}'/>
                    <t t-if='o.user_id'>
                      <div class='cashier'>
                        <div>--------------------------------</div>
                        <div>Atentido por
                        <t t-esc='o.user_id.name'/>
                        </div>
                      </div>
                    </t>
                  </div>
                  <br/>
                </div>
                <div class="receipt-phone client-info">
                  <t t-if="o.name">

		    <t t-if="o.refund_invoice_id">
                      <t t-if="o.refund_type == 'credit'">Nota de Crédito </t>
                      <t t-if="o.refund_type == 'debit'">Nota de Débito </t>
		    </t>
		    <t t-else="">
                      <t t-if="o.document_type == 'factura'">
		      Factura Electrónica </t>
                      <t t-if="o.document_type == 'boleta'">
		      Boleta Electrónica </t>
		    </t>
		    
                    <t t-esc="o.name"/>
                    <br/>
                    <t t-if="o.refund_invoice_id">
                        <t t-if="o.refund_type == 'credit'"><strong>Tipo de Nota de Credito: </strong><t t-esc="o.credit_note_type.name"/></t>
                        <t t-if="o.refund_type == 'debit'"><strong>Tipo de Nota de Débito: </strong><t t-esc="o.debit_note_type.name"/></t>
                    </t>
                    <br/>
                    <t t-if="o.partner_id">
                      <t t-if="o.partner_id.catalog_06_id.code == 6">
                        Razón Social:
                      </t>
                      <t t-else="">
                        Nombre:
                      </t>
                      <t t-esc="o.partner_id.name"/>
                      <br/>
                      <t t-esc="o.partner_id.catalog_06_id.name"/>:
                      <t t-esc="o.partner_id.vat"/>
		      <div name="extra-customer-info">
		      </div>
                      <br/>
                    </t>
                  </t>
                </div>

                <table class='invoice-lines'>
                  <thead>
                    <tr>
                      <td>CANT</td>
                      <td>PRODUCTO</td>
                      <td>VALOR</td>
                    </tr>
                  </thead>

                  <tbody>
                    <t t-foreach="o.invoice_line_ids" t-as="line">
                      <tr>
                        <td >
                          <span t-field="line.quantity"/>
                        </td>
                        <td t-attf-class="text-left">
                          <span t-field="line.name" />
                        </td>
                        <td class="text-right">
                          <span t-field="line.price_total"/>
                        </td>
                      </tr>
                    </t>
                  </tbody>
                </table>
                <br/>
                <table class='invoice-lines'>
                  <tr>
                    <td>Subtotal:</td>
                    <td class="text-right">
                      <span t-field="o.amount_untaxed" />
                    </td>
                  </tr>
                  <t t-foreach="o.tax_line_ids" t-as="taxdetail">
                    <tr>
                      <td>
                        <span t-field="taxdetail.name"/>
                      </td>
                      <td class="text-right">
                        <span t-field="taxdetail.amount_total" />
                      </td>
                    </tr>
                  </t>
                  <tr class="total-info" name="totals">
                    <td>Total:</td>
                    <td class="text-right">
                      <span t-field="o.amount_total"/>
                    </td>
                  </tr>
                </table>
                <br/>
                <div class="invoice-info">
                  <p>SON: <t t-esc="o.get_total_in_words()"/></p>
                  <t t-if="o.digest">
                    <span t-field="o.digest"/>
                  </t>
                  <div class="invoice-center-align">
                    <p t-if="o.show_barcode()">
                      <span t-if="o.barcode">
                        <img width="65%"
                             t-attf-src="data:image/*;base64, {{o.barcode}}"
                             />
                      </span>
                    </p>
                    <p t-if="o.show_qr()">
                      <span t-if="o.qr">
                        <img width="50%"
                             t-attf-src="data:image/*;base64, {{o.qr}}"
                             />
                      </span>
                    </p>
                  </div>
                  <t t-if="o.refund_invoice_id">
                    <p t-if="o.refund_type == 'credit'">Representación impresa de la nota de crédito electrónica: <span t-field="o.company_id.partner_id.url_invoice"/></p>
                    <p t-if="o.refund_type == 'debit'">Representación impresa de la nota de débito electrónica: <span t-field="o.company_id.partner_id.url_invoice"/></p>
                  </t>
                  <t t-else="">
                    <p t-if="o.document_type == 'factura'">Representación impresa de la factura electrónica: <span t-field="o.company_id.partner_id.url_invoice"/></p>
                    <p t-if="o.document_type == 'boleta'">Representación impresa de la boleta de venta electrónica: <span t-field="o.company_id.partner_id.url_invoice"/></p>
                  </t>
                  <div class="invoice-center-align">
                    <span t-field="o.date_invoice"/>
                  </div>
                </div>
              </div>
            </div>
          </t>
        </t>
      </t>
    </template>
  </data>
</odoo>
